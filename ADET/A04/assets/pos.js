var products = [
    {
        "category": "Bouquets",
        "contents": [
            {
                "isAvailable": true,
                "name": "Rose Bouquet",
                "code": "RSBQ",
                "bgColor": "#ffe6e6",
                "sizes": [
                    {"name": "Small", "code": "SM", "price": 500, "image": "img/RSBQSM.jpg"},
                    {"name": "Medium", "code": "MD", "price": 800, "image": "img/RSBQMD.jpg"},
                    {"name": "Large", "code": "LG", "price": 1200, "image": "img/RSBQLG.jpg"}
                ]
            },
            {
                "isAvailable": true,
                "name": "White Lily Bouquet",
                "code": "LY-WT",
                "bgColor": "#ffffff", 
                "sizes": [
                  { "name": "Small", "code": "SM", "price": 600, "image": "img/LY-WTSM.jpg" },
                  { "name": "Medium", "code": "MD", "price": 900, "image": "img/LY-WTMD.jpg" },
                  { "name": "Large", "code": "LG", "price": 1500, "image": "img/LY-WTLG.jpg" }
                ]
              },
              {
                "isAvailable": true,
                "name": "Purple Tulip Bouquet",
                "code": "TU-PL",
                "bgColor": "#b16eff", 
                "sizes": [
                  { "name": "Small", "code": "SM", "price": 750, "image": "img/TU-PLSM.jpg"},
                  { "name": "Medium", "code": "MD", "price": 1200, "image":"img/TU-PLMD.jpg"},
                  { "name": "Large", "code": "LG", "price": 1800, "image": "img/TU-PLLG.jpg"}
                ]
              },              
            {
                "isAvailable": true,
                "name": "Sunflower Bouquet",
                "code": "SNBQ",
                "bgColor": "#fff9db",
                "sizes": [
                    { "name": "Small", "code": "SM", "price": 400, "image": "img/SNBQSM.jpg"},
                    { "name": "Medium", "code": "MD", "price": 700, "image": "img/SNBQMD.jpg"},
                    { "name": "Large", "code": "LG", "price": 1100, "image": "img/SNBQLG.jpg"}
                ]
            },
            {
                "isAvailable": true,
                "name": "Carnation Bouquet",
                "code": "CARBQ",
                "bgColor": "#fff0f5",
                "sizes": [
                    { "name": "Small", "code": "SM", "price": 350, "image": "img/CARBQSM.jpg" },
                    { "name": "Medium", "code": "MD", "price": 650, "image": "img/CARBQMD.jpg" },
                    { "name": "Large", "code": "LG", "price": 1000, "image": "img/CARBQLG.jpg" }
                ]
            }
            
        ]
    },
    {
        "category": "Vase Arrangements",
        "contents": [
          {
            "isAvailable": true,
            "name": "Mixed Vase Arrangement",
            "code": "MXVS",
            "bgColor": "#fde2e4",
            "price": 2100,
            "image": "img/MXVS.jpg"
          },
          {
            "isAvailable": true,
            "name": "Red Rose Vase",
            "code": "RRVS",
            "bgColor": "#ffccd5",
            "price": 1800,
            "image": "img/RRVS.jpg"
          },
          {
            "isAvailable": false,
            "name": "Assorted Roses Vase",
            "code": "ARVS",
            "bgColor": "#f8edeb",
            "price": 2200,
            "image": "img/ARVS.jpg"
          },
          {
            "isAvailable": true,
            "name": "Tulip Bouquet Vase",
            "code": "TBV",
            "bgColor": "#ffffff",
            "price": 1400,
            "image": "img/TBV.jpg"
          },
          {
            "isAvailable": true,
            "name": "Lily Vase Arrangement",
            "code": "LVA",
            "bgColor": "#d0f4de",
            "price": 1700,
            "image": "img/LVA.jpg"
          },
          {
            "isAvailable": false,
            "name": "Mixed Seasonal Flowers Vase",
            "code": "MSFV",
            "bgColor": "#fff1e6",
            "price": 3000,
            "image": "img/MSFV.jpg"
          },
          {
            "isAvailable": true,
            "name": "Lavender Vase",
            "code": "LRV",
            "bgColor": "#cdb4db",
            "price": 2000,
            "image": "img/LRV.jpg"
          },
          {
            "isAvailable": true,
            "name": "Sunflower Vase",
            "code": "SFV",
            "bgColor": "#fff7d6",
            "price": 1500,
            "image": "img/SFV.jpg"
          },
          {
            "isAvailable": true,
            "name": "Carnation Mix Vase",
            "code": "CMV",
            "bgColor": "#ffe5ec",
            "price": 1700,
            "image": "img/CMV.jpg"
          }
          
        ]
      },    
      {
        "category": "Single Stems",
        "contents": [
            {
                "isAvailable": true,
                "name": "Red Rose",
                "code": "RRS",
                "bgColor": "#ffd6d6",  
                "price": 100,
                "image": "img/RRS.jpg"
            },
            {
                "isAvailable": true,
                "name": "White Rose",
                "code": "WRS",
                "bgColor": "#f9f9f9",  
                "price": 90,
                "image": "img/WRS.jpg"
            },
            {
                "isAvailable": true,
                "name": "Pink Rose",
                "code": "PRS",
                "bgColor": "#ffe6f0",  
                "price": 120,
                "image": "img/PRS.jpg"
            },
            {
                "isAvailable": false,
                "name": "Peony",
                "code": "PNY",
                "bgColor": "#ffe0ec",  
                "price": 400,
                "image": "img/PNY.jpg"
            },
            {
                "isAvailable": true,
                "name": "White Lily",
                "code": "WLS",
                "bgColor": "#f7f7ff",  
                "price": 120,
                "image": "img/WLS.jpg"
            },
            {
                "isAvailable": true,
                "name": "Sunflower",
                "code": "SF",
                "bgColor": "#fff4cc",  
                "price": 80,
                "image": "img/SF.jpg"
            },
            {
                "isAvailable": true,
                "name": "Tulip",
                "code": "TUL",
                "bgColor": "#ffe9f2", 
                "price": 110,
                "image": "img/TUL.jpg"
            },
            {
                "isAvailable": true,
                "name": "Purple Orchid",
                "code": "PO",
                "bgColor": "#f3e6ff",  
                "price": 150,
                "image": "img/PO.jpg"
            },
            {
                "isAvailable": false,
                "name": "Daffodil",
                "code": "DAF",
                "bgColor": "#ffffcc",  
                "price": 90,
                "image": "img/DAF.jpg"
            },
            {
                "isAvailable": true,
                "name": "Carnation",
                "code": "CAR",
                "bgColor": "#fff0f5",  
                "price": 90,
                "image": "img/CAR.jpg"
            },
            {
                "isAvailable": false,
                "name": "Gerbera Daisy",
                "code": "GD",
                "bgColor": "#ffe0cc", 
                "price": 95,
                "image": "img/GD.jpg"
            },
            {
                "isAvailable": true,
                "name": "Chrysanthemum",
                "code": "CHR",
                "bgColor": "#ffe6e1", 
                "price": 75,
                "image": "img/CHR.jpg"
            },
            {
                "isAvailable": true,
                "name": "Blue Hydrangea",
                "code": "HYD",
                "bgColor": "#e0f0ff",
                "price": 130,
                "image": "img/HYD.jpg"
            },
            {
                "isAvailable": true,
                "name": "Lavender Stem",
                "code": "LAV",
                "bgColor": "#f5e6ff",
                "price": 95,
                "image": "img/LAV.jpg"
            },
            {
                "isAvailable": true,
                "name": "Calla Lily",
                "code": "CLL",
                "bgColor": "#fdf6e3",
                "price": 140,
                "image": "img/CLL.jpg"
            }
        ]
    },    
    {
        "category": "Gift Sets",
        "contents": [
            {
                "isAvailable": true,
                "name": "Rose + Chocolate",
                "code": "GFT01",
                "bgColor": "#E3735E",  
                "price": 1000,
                "image": "img/GFT01.jpg"
            },
            {
                "isAvailable": true,
                "name": "Bouquet + Teddy Bear",
                "code": "GFT02",
                "bgColor": "#ffe8f0",  
                "price": 1300,
                "image": "img/GFT02.jpg"
            },
            {
                "isAvailable": false,
                "name": "Wine + Flower",
                "code": "GFT03",
                "bgColor": "#fce4ec",  
                "price": 1500,
                "image": "img/GFT03.jpg"
            },
            {
                "isAvailable": true,
                "name": "Cake + Flower",
                "code": "GFT04",
                "bgColor": "#fff0e1",  
                "price": 1500,
                "image": "img/GFT04.jpg"
            },
            {
                "isAvailable": true,
                "name": "Bouquet + Photo + Card",
                "code": "GFT05",
                "bgColor": "#e5f4ff", 
                "price": 800,
                "image": "img/GFT05.jpg"
            }
        ]
    },     
        {
            "category": "Potted Plants",
            "contents": [
                {
                    "isAvailable": true,
                    "name": "Succulent Pot",
                    "code": "PTP01",
                    "bgColor": "#e3f9e5",
                    "price": 250,
                    "image": "img/PTP01.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Mini Bonsai",
                    "code": "PTP02",
                    "bgColor": "#f1f7e7",
                    "price": 600,
                    "image": "img/PTP02.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Cactus Pot",
                    "code": "PTP03",
                    "bgColor": "#f9fbe7",
                    "price": 300,
                    "image": "img/PTP03.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Ficus Tree",
                    "code": "PTP04",
                    "bgColor": "#e6f2e6",
                    "price": 800,
                    "image": "img/PTP04.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Snake Plant",
                    "code": "PTP05",
                    "bgColor": "#e6ffe6",
                    "price": 450,
                    "image": "img/PTP05.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Aloe Vera Pot",
                    "code": "PTP06",
                    "bgColor": "#f0fff0",
                    "price": 320,
                    "image": "img/PTP06.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Peace Lily",
                    "code": "PTP07",
                    "bgColor": "#edf7ed",
                    "price": 500,
                    "image": "img/PTP07.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Lavender Pot",
                    "code": "PTP08",
                    "bgColor": "#f5e8ff",
                    "price": 380,
                    "image": "img/PTP08.jpg"
                  }                       
            ]
        },
        {
            "category": "Dried Flowers",
            "contents": [
                {
                    "isAvailable": true,
                    "name": "Preserved Rose",
                    "code": "DRF01",
                    "bgColor": "#fce8e8",  
                    "price": 400,
                    "image": "img/DRF01.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Dried Lavender",
                    "code": "DRF02",
                    "bgColor": "#f3e6ff",  
                    "price": 300,
                    "image": "img/DRF02.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Dried Sunflower",
                    "code": "DRF03",
                    "bgColor": "#fff9db",  
                    "price": 350,
                    "image": "img/DRF03.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Dried Wheat",
                    "code": "DRF04",
                    "bgColor": "#f7f1e3",  
                    "price": 250,
                    "image": "img/DRF04.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Dried Baby's Breath",
                    "code": "DRF05",
                    "bgColor": "#fff0f5",  
                    "price": 280,
                    "image": "img/DRF05.jpg"
                }
            ]
        },{
            "category": "Wreaths",
            "contents": [
                {
                    "isAvailable": false,
                    "name": "Funeral Wreath",
                    "code": "WRTH01",
                    "bgColor": "#f2f2f2",  
                    "price": 2000,
                    "image": "img/WRTH01.jpg"
                },
                {
                    "isAvailable": false,
                    "name": "Christmas Wreath",
                    "code": "WRTH02",
                    "bgColor": "#e6f2e6", 
                    "price": 1500,
                    "image": "img/WRTH02.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Spring Wreath",
                    "code": "WRTH03",
                    "bgColor": "#fdf0f5",  
                    "price": 1000,
                    "image": "img/WRTH03.jpg"
                },
                {
                    "isAvailable": false,
                    "name": "Autumn Wreath",
                    "code": "WRTH04",
                    "bgColor": "#fff2e6",  
                    "price": 1200,
                    "image": "img/WRTH04.jpg"
                }
            ]
        },
        {
            "category": "Corsages & Boutonnieres",
            "contents": [
                {
                    "isAvailable": true,
                    "name": "Prom Corsage",
                    "code": "CRSG01",
                    "bgColor": "#fff0f5", 
                    "price": 500,
                    "image": "img/CRSG01.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Wedding Boutonniere",
                    "code": "BTN01",
                    "bgColor": "#f0fff0",  
                    "price": 300,
                    "image": "img/BTN01.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Homecoming Corsage",
                    "code": "CRSG02",
                    "bgColor": "#fffaf0",  
                    "price": 450,
                    "image": "img/CRSG02.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Bridal Corsage",
                    "code": "CRSG03",
                    "bgColor": "#fef6ff",  
                    "price": 600,
                    "image": "img/CRSG03.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Formal Boutonniere",
                    "code": "BTN02",
                    "bgColor": "#f0f8ff", 
                    "price": 350,
                    "image": "img/BTN02.jpg"
                }
            ]
        },
        {
            "category": "Accessories",
            "contents": [
                {
                    "isAvailable": true,
                    "name": "Glass Vase",
                    "code": "ACC01",
                    "bgColor": "#fdf2f2", 
                    "price": 200,
                    "image": "img/ACC01.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Greeting Card",
                    "code": "ACC02",
                    "bgColor": "#fffbe6", 
                    "price": 50,
                    "image": "img/ACC02.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Flower Pot",
                    "code": "ACC03",
                    "bgColor": "#f0fff0",  
                    "price": 150,
                    "image": "img/ACC03.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Floral Ribbon",
                    "code": "ACC04",
                    "bgColor": "#fff0f5",  
                    "price": 100,
                    "image": "img/ACC04.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Plant Stand",
                    "code": "ACC06",
                    "bgColor": "#f0f8ff",  
                    "price": 300,
                    "image": "img/ACC05.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Wrapping Paper",
                    "code": "ACC07",
                    "bgColor": "#fef6ff", 
                    "price": 80,
                    "image": "img/ACC06.jpg"
                }
            ]
        },        
        {
            "category": "Floral Scented Candles",
            "contents": [
                {
                    "isAvailable": true,
                    "name": "Lavender Bloom Candle",
                    "code": "FSC01",
                    "bgColor": "#f3f0ff",
                    "price": 350,
                    "image": "img/FSC.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Rose Petal Glow Candle",
                    "code": "FSC02",
                    "bgColor": "#fff0f5",
                    "price": 400,
                    "image": "img/FSC.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Sunflower Citrus Candle",
                    "code": "FSC03",
                    "bgColor": "#fffde6",
                    "price": 380,
                    "image": "img/FSC.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Peony Blush Candle",
                    "code": "FSC04",
                    "bgColor": "#ffe6f0",
                    "price": 370,
                    "image": "img/FSC.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Orchid Mist Candle",
                    "code": "FSC05",
                    "bgColor": "#e6f0ff",
                    "price": 390,
                    "image": "img/FSC.jpg"
                },
                {
                    "isAvailable": true,
                    "name": "Cherry Blossom Breeze",
                    "code": "FSC06",
                    "bgColor": "#fff5f0",
                    "price": 410,
                    "image": "img/FSC.jpg"
                },
                {
                    "isAvailable": false,
                    "name": "Gardenia Dream Candle",
                    "code": "FSC07",
                    "bgColor": "#f0fff0",
                    "price": 360,
                    "image": "img/FSC.jpg"
                },
                {
                    "isAvailable": false,
                    "name": "Hibiscus Sunset Candle",
                    "code": "FSC08",
                    "bgColor": "#ffe6cc",
                    "price": 395,
                    "image": "img/FSC.jpg"
                },
                {
                    "isAvailable": false,
                    "name": "Jasmine Whisper Candle",
                    "code": "FSC09",
                    "bgColor": "#f0f8ff",
                    "price": 420,
                    "image": "img/FSC.jpg"
                }
            ]
        }                
    ];    

    var total = 0;

    function loadCategories() {
        var categoriesContainer = document.getElementById("categories");
    
        products.forEach((product, index) => {
          categoriesContainer.innerHTML += `
            <div onclick="loadProducts('` + index + `')" class="card mx-1 p-3 text-center category-btn" style="cursor: pointer;">
              <small>` + product.category + `</small>
            </div>
          `;
        });
    }
    
    function loadProducts(categoryIndex) {
        var maincontainer = document.getElementById("maincontainer");
        maincontainer.innerHTML = "";
    
        products[categoryIndex].contents.forEach(content => {
            var bgColor = content.bgColor || "#ffffff"; 
    
            var isUnavailable = !content.isAvailable;
    
            if (content.sizes) {
                content.sizes.forEach(size => {
                    maincontainer.innerHTML += `
                        <div onclick="${isUnavailable ? '' : `addToReceipt('${size.price}','${content.code + size.code}')`}" 
                             class="card mx-1 my-2 content p-3 text-center ${isUnavailable ? 'unavailable' : ''}" 
                             style="background-color: ${bgColor}; cursor: ${isUnavailable ? 'not-allowed' : 'pointer'};">
                          <img src="${size.image}" alt="${content.name} ${size.name}" 
                               style="height: 200px; width: 100%; object-fit: cover;" 
                               class="img-fluid mb-2">
                          <small>${content.name} (${size.name})</small><br>
                          <strong>₱${size.price}</strong>
                        </div>
                    `;
                });
            } else {
                maincontainer.innerHTML += `
                    <div onclick="${isUnavailable ? '' : `addToReceipt('${content.price}','${content.code}')`}" 
                         class="card mx-1 my-2 content p-3 text-center ${isUnavailable ? 'unavailable' : ''}" 
                         style="background-color: ${bgColor}; cursor: ${isUnavailable ? 'not-allowed' : 'pointer'};">
                      <img src="${content.image}" alt="${content.name}" 
                           style="height: 200px; width: 100%; object-fit: cover;" 
                           class="img-fluid mb-2">
                      <small>${content.name}</small><br>
                      <strong>₱${content.price}</strong>
                    </div>
                `;
            }
        });
    }
    
function addToReceipt(price, code) {
    var receiptContainer = document.getElementById("receipt");
    total = parseFloat(total) + parseFloat(price);

    totalValueElement = document.getElementById("totalValue");
    totalValueElement.innerHTML = total;

    receiptContainer.innerHTML += `
    <div class="d-flex flex-row justify-content-between">
      <div><small>` + code + `</small></div>
      <div><small>` + price + `</small></div>
    </div>
  `;
}

function clearCart() {
    document.getElementById("receipt").innerHTML = "";
    total = 0;
    document.getElementById("totalValue").innerHTML = total;
  }

  document.querySelector('[data-bs-target="#checkoutModal"]').addEventListener('click', function () {
    var receiptItems = document.getElementById('receipt').children;
    var formatted = "";

    for (var i = 0; i < receiptItems.length; i++) {
        var itemText = receiptItems[i].innerText.trim().split("\n");
        if (itemText.length === 2) {
            var name = itemText[0];
            var price = itemText[1];
            formatted += name + " ₱" + price + "\n";
        }
    }

    document.getElementById('modalReceipt').textContent = formatted || "(Cart is empty)";
    document.getElementById('modalTotal').textContent = "₱" + document.getElementById('totalValue').textContent;
});

function confirmCheckout() {
    document.getElementById("receipt").innerHTML = "";
    document.getElementById("totalValue").textContent = "0";
    
    var modal = bootstrap.Modal.getInstance(document.getElementById('checkoutModal'));
    modal.hide();

    location.reload();
}

loadCategories();
